---
title: 'ðŸª„GitHub Actionsë¥¼ ì´ìš©í•´ì„œ CI/CDë¥¼ êµ¬ì¶•í•´ë³´ìž!'
date: 2021-10-07
category: 'DevOps'
draft: false
---

![GitHub Actions](https://media.vlpt.us/images/lingodingo/post/6faf3011-da9b-431b-980a-7324f1ffbc11/android-github-actions-setup-image-35b6a79fea4a7289acb6796cd4ad05b4.png)

ë¸”ë¡œê·¸ë¥¼ ìƒˆë¡œ íŒŒì„œ ê¸€ì„ ìž‘ì„±ì„ í•˜ë©´ì„œ ì•„ì£¼ ì¹˜ëª…ì ìœ¼ë¡œ ê·€ì°®ì€ ë¬¸ì œê°€ í•˜ë‚˜ ìƒê²¼ë‹¤. ë°”ë¡œ
`deploy`!! í¬ìŠ¤íŒ…ì„ í•˜ë‚˜ ì“¸ ë•Œë§ˆë‹¤ ì¼ì¼ížˆ ë°°í¬ë¥¼ í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì¹˜ëŠ” ê²ƒì´ ë„ˆë¬´ ê·€ì°®ì•˜ë˜ ë‚˜ëŠ” ìžë™í™”ì˜ ê°„ì ˆí•¨ì„ ëŠë‚€ë‹¤. êµ¬ê¸€ì—ì„œ ì—´ì‹¬ížˆ ì„œì¹˜ë¥¼ í•œ ê²°ê³¼ `Jenkins`ì™€ `GitHub Actions`ì´ë¼ëŠ” íˆ´ì„ ë°œê²¬í–ˆê³  ... ê·¸ëŸ¬ë‹¤ê°€ ê²°êµ­ `GitHub Actions`ë¼ëŠ” ë°©ë²•ì„ ì±„íƒí•˜ê¸°ë¡œ ê²°ì‹¬ì„ í•˜ëŠ”ë° ...ë”ë³´ê¸°

## ìž ê¹ë§Œ ê·¸ëŸ°ë° CI/CDê°€ ë­”ë°?

CI/CDëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ ë‹¨ê³„ë¥¼ `ìžë™í™”`ì‹œì¼œì„œ ì§§ì€ ì£¼ê¸°ë¡œ ê³ ê°ì—ê²Œ ì œê³µì„ í•  ìˆ˜ ìžˆê²Œë” í•˜ëŠ” ë°©ë²•ì´ë‹¤.

CI : Continuous Integration(ì§€ì†ì  í†µí•©)

CD : Continuous Delivery(ì§€ì†ì  ì œê³µ)/ Continuous Deployment(ì§€ì†ì  ë°°í¬)

ì˜ ì¤„ìž„ë§ì´ì§€ë§Œ...ë¬´ìŠ¨ ë§ì¸ì§€ ëª¨ë¥´ê² ë‹¤ ë” ì•Œì•„ë³´ìž

### **CIëž€?**

í•œ ì¤„ë¡œ ìš”ì•½í•˜ë©´ **í†µí•©ì„ ìœ„í•œ ë‹¨ê³„(ë¹Œë“œ, í…ŒìŠ¤íŠ¸, ë¨¸ì§€)ë¥¼ ìžë™í™”í•˜ëŠ” ê²ƒ**ì´ë‹¤

CIë¥¼ ì„±ê³µì ìœ¼ë¡œ ì ìš©í•œë‹¤ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•œ ìƒˆë¡œìš´ ì½”ë“œ ë³€ê²½ ì‚¬í•­ì´ ì •ê¸°ì ìœ¼ë¡œ ë¹Œë“œ ë° í…ŒìŠ¤íŠ¸ë˜ì„œ ê³µìœ  ë ˆíŒŒì§€í† ë¦¬ì— í†µí•©ì´ ëœë‹¤. ì—¬ëŸ¬ ëª…ì˜ ê°œë°œìžê°€ ë™ì‹œì— ì–´í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œê³¼ ê´€ë ¨ëœ ì½”ë“œ ìž‘ì—…ì„ í•  ê²½ìš°ì— ì¶©ëŒí•˜ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìžˆë‹¤.

### CIì˜ ìž¥ì 

- ê°œë°œì˜ íŽ¸ì˜ì„±ì´ ì¦ê°€
  - ë””ë²„ê¹…ì´ ì‰¬ì›Œì§€ê¸° ë•Œë¬¸
- ë³€ê²½ëœ ì½”ë“œì— ëŒ€í•œ ì¦‰ê°ì  í”¼ë“œë°±ê³¼ ê²€ì¦ ê°€ëŠ¥
- ì¢‹ì€ ì½”ë“œ í€„ë¦¬í‹° ìœ ì§€ ê°€ëŠ¥
  - í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•˜ëŠ” ì½”ë“œë§Œ ê³µìœ  ë ˆí¬ì§€í„°ë¦¬ì— ì˜¬ë¼ê°ˆ ìˆ˜ ìžˆê¸° ë•Œë¬¸
- ì†ŒìŠ¤ì½”ë“œì˜ í†µí•©ê³¼ ê²€ì¦ì— ë“¤ì–´ê°€ëŠ” ì‹œê°„ì´ ë‹¨ì¶•ëœë‹¤

### **CDëž€?**

![ì œê³µê³¼ ë°°í¬ì˜ ì°¨ì´](https://blog.kakaocdn.net/dn/eeSLmu/btqI9pXqCN8/iIopSPh3KSK1SwhRjkWPf1/img.png)

**ì§€ì†ì  ì œê³µ**

- CIë¥¼ ê±°ì¹œ ì´í›„ì— ë°°í¬ë¥¼ í•  ì¤€ë¹„ë¥¼ í•˜ê³ , ì´ ê³¼ì •ì—ì„œ ë°°í¬ê°€ ë  ê²ƒì´ ì•„ë¬´ëŸ° ë¬¸ì œê°€ ì—†ëŠ”ì§€ ê°œë°œìž/ê²€ì¦ íŒ€ì´ ê²€ì¦ì„ í•œ ë’¤ì— _ìˆ˜ë™ìœ¼ë¡œ_ ë°°í¬ë¥¼ í•œë‹¤

**ì§€ì†ì  ë°°í¬**

- ë°°í¬ë¥¼ í•  ì¤€ë¹„ê°€ ë˜ì—ˆë‹¤ë©´ ìžë™ì ìœ¼ë¡œ ì‚¬ìš©ìžì—ê²Œê¹Œì§€ ë°°í¬ê°€ ë  ìˆ˜ ìžˆë„ë¡ ìžë™í™”ë¥¼ ì‹œí‚¬ ìˆ˜ ìžˆê³ , ê·¸ ì¼ë ¨ì˜ ê³¼ì •ì„ **ì§€ì†ì  ë°°í¬**ë¼ê³  ë§í•œë‹¤

### CDì˜ ìž¥ì 

- ê°œë°œë¶€í„° ë°°í¬ê¹Œì§€ ê³¼ì •ì´ ë²ˆê±°ë¡­ì§€ ì•Šê³  ê°„ì†Œí™”ë˜ê¸° ë•Œë¬¸ì— ì‚¬ìš©ìž í”¼ë“œë°±ì„ ë¹ ë¥´ê²Œ ë°˜ì˜í•  ìˆ˜ ìžˆë‹¤
  - ì¦‰, **ìž¥ì•  ëŒ€ì‘ì´ ë¹¨ë¼ì§„ë‹¤**

### CI/CDì˜ íë¦„

- CI

  1. ê°œë°œìžëŠ” ìžì‹ ì´ ê°œë°œí•œ ì†Œí”„íŠ¸ì›¨ì–´ì˜ ì†ŒìŠ¤ì½”ë“œë¥¼ ê³µí†µëœ ë²„ì „ ê´€ë¦¬ ì‹œìŠ¤í…œ(ex.GitHub)ì— ì €ìž¥í•œë‹¤.
  2. ì†ŒìŠ¤ì½”ë“œìƒì—ì„œ ë³€ë™ì´ ìƒê¸°ë©´ ë²„ì „ ê´€ë¦¬ ì‹œìŠ¤í…œì—ì„œëŠ” CI íˆ´ë¡œ ì½”ë“œì˜ ë³€ê²½ì„ ì•Œë¦°ë‹¤
  3. CIíˆ´ì—ì„œëŠ” ë³€ê²½ëœ ì½”ë“œë¥¼ ë¹Œë“œ, í…ŒìŠ¤íŠ¸, ë¨¸ì§€ë¥¼ í•œë‹¤.

- CD
  1. CIë¥¼ í†µí•´ ì†ŒìŠ¤ì½”ë“œë¥¼ ê²€ì¦í•œë‹¤
  2. ê²€ì¦ëœ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ì‹¤ì œ í”„ë¡œë•ì…˜ í™˜ê²½ìœ¼ë¡œ ë°°í¬í•œë‹¤.

## Â¿Â¿GitHub Actions??

- GitHubì—ì„œ ì œê³µí•˜ëŠ” ì›Œí¬í”Œë¡œìš°ë¥¼ ìžë™í™”í•˜ë„ë¡ ë„ì™€ì£¼ëŠ” ë„êµ¬ì´ë‹¤.

- Githubì—ì„œ ì—¬ëŸ¬ê°€ì§€ workflow í…œí”Œë¦¿ì„ ì¶”ì²œí•´ì£¼ëŠ”ë°, ì´ê±¸ ì‚¬ìš©í•¨ìœ¼ë¡œì„œ í…ŒìŠ¤íŠ¸/ë¹Œë“œ/ë°°í¬ ë“± ë‹¤ì–‘í•œ ìž‘ì—…ë“¤ì„ ìžë™í™”í•˜ì—¬ ëšë”± ì²˜ë¦¬í•  ìˆ˜ ìžˆë‹¤.

### GitHub Actionsì„ ì„ íƒí•œ ì´ìœ 

1. Jenkinsì²˜ëŸ¼ ì„¤ì¹˜ í›„ ë”°ë¡œ ì„œë²„ë¥¼ íŒ” í•„ìš”ê°€ ì—†ë‹¤
2. ê¸°ì™•ì´ë©´ GitHub í•˜ë‚˜ë¡œ ìžë™í™”ë¥¼ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ íŽ¸í•˜ë‹¤ê³  íŒë‹¨í–ˆë‹¤.

## GitHub Actionsì˜ êµ¬ì„±

**Workflow(ì›Œí¬ í”Œë¡œìš°)**

- ì €ìž¥ì†Œì— ì¶”ê°€í•˜ëŠ” ìžë™í™”ëœ í”„ë¡œì„¸ìŠ¤. í•˜ë‚˜ ì´ìƒì˜ `job`ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìžˆìœ¼ë©°, ì´ë²¤íŠ¸ì— ì˜í•´ ì‹¤í–‰ëœë‹¤.
- Workflow íŒŒì¼ì€ `YAML`ìœ¼ë¡œ ìž‘ì„±ë˜ê³ , `.github/workflows`í´ë” ì•„ëž˜ì— ì €ìž¥ëœë‹¤.

**Event(ì´ë²¤íŠ¸)**

- ì›Œí¬ í”Œë¡œìš°ë¥¼ ì‹¤í–‰í•˜ëŠ” íŠ¹ì • í™œë™ì´ë‚˜ ê·œì¹™.
- ì»¤ë°‹ì˜ push/pull requestê°€ ìƒì„±ë˜ì—ˆì„ ë•Œ ë¿ë§Œ ì•„ë‹ˆë¼, GitHub ì™¸ë¶€ì—ì„œ ë°œìƒí•˜ëŠ” í™œë™ìœ¼ë¡œë„ ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¬ ìˆ˜ë„ ìžˆë‹¤.

ex)

```yaml
# pushë‚˜ PRì´ ë°œìƒí•  ë•Œ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰
on: [push, pull_request]
```

ê²Œë‹¤ê°€ cron ë¬¸ë²•ìœ¼ë¡œ `schedule` ì´ë²¤íŠ¸ë¥¼ ì„¤ì •í•  ìˆ˜ ìžˆë‹¤!

ex)

```yaml
# ì›”-ê¸ˆ ì˜¤ì „ 9ì‹œ
on:
  schedule:
    - cron: '0 9 * * 1-5'
```

**Job(ìž‘ì—…)**

- ì›Œí¬í”Œë¡œìš°ì˜ ê¸°ë³¸ ë‹¨ìœ„. ì—¬ëŸ¬ Stepìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìžˆë‹¤.
- ê¸°ë³¸ì ìœ¼ë¡œëŠ” ì—¬ëŸ¬ ìž‘ì—…ì„ ë³‘ë ¬ì ìœ¼ë¡œ ì‹¤í–‰í•˜ì§€ë§Œ, ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰í•˜ë„ë¡ ì„¤ì •í•  ìˆ˜ë„ ìžˆë‹¤.

**Step(ìŠ¤í…)**

- Jobì•ˆì—ì„œ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” í”„ë¡œì„¸ìŠ¤ì˜ ë‹¨ìœ„. ì—¬ê¸°ì„œ ëª…ë ¹ì„ ë‚´ë¦¬ê±°ë‚˜, actionì„ ì‹¤í–‰í•  ìˆ˜ ìžˆë‹¤.
- í•œ jobì˜ ê° ìŠ¤í…ë“¤ì€ ë™ì¼í•œ ëŸ¬ë„ˆì—ì„œ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì—, í•´ë‹¹ ìž‘ì—…ì˜ ì•¡ì…˜ë“¤ì€ ì„œë¡œ ë°ì´í„°ë¥¼ ê³µìœ í•˜ê²Œ ëœë‹¤.

**Runner(ëŸ¬ë„ˆ)**

- `GitHub Actions Runner Application`ì´ ì„¤ì¹˜ëœ ì„œë²„.
- GitHubì—ì„œ í˜¸ìŠ¤íŒ…í•˜ëŠ” ëŸ¬ë„ˆë¥¼ ì‚¬ìš©í•  ìˆ˜ë„ ìžˆê³ , ì§ì ‘ í˜¸ìŠ¤íŒ…ì„ í•  ìˆ˜ë„ ìžˆë‹¤.
- ì›Œí¬í”Œë¡œìš°ê°€ ì‹¤í–‰ë  ì¸ìŠ¤í„´ìŠ¤ì´ë‹¤.

## ë°°í¬ ìžë™í™” ê°€ë³´ìžê³ .

### Access Token ìƒì„±

GitHub Actionsë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” `Access Token`ì´ í•„ìš”í•˜ë‹¤. ë ˆí¬ì§€í† ë¦¬ì— ì§ì ‘ì ìœ¼ë¡œ ì ‘ê·¼ì„ í•´ì•¼í•˜ê¸° ë•Œë¬¸!!

[ì—¬ê¸°](https://github.com/settings/tokens)ì—ì„œ ë°œê¸‰ë°›ì„ ìˆ˜ ìžˆë‹¤.

`Generate New Token` ë²„íŠ¼ì„ í´ë¦­í•´ì„œ Noteì˜ ë¶€ë¶„ì— í† í° ì´ë¦„ì„ ì ê³ , Select scopesì˜ Repoë¶€ë¶„ì„ ì „ë¶€ ì²´í¬í•´ì¤€ë‹¤.
![newtoken](./images/new_token.png)

`Generate Token` ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ í† í°ì´ ìƒì„±ëœë‹¤! ê·¸ëŸ°ë° í† í°ì€ ë‹¤ìŒì— ë‹¤ì‹œ í™•ì¸í•  ìˆ˜ ì—†ìœ¼ë‹ˆê¹Œ ê¼¬ì˜¥..ë³µì‚¬í•´ì„œ ì–´ë”” ì ì–´ë†”ì•¼í•œë‹¤..

### Access Token í• ë‹¹

ìœ„ì—ì„œ ë°œí–‰í•œ í† í°ì„ ë ˆí¬ì§€í† ë¦¬ì— í• ë‹¹ì„ í•´ì£¼ìž.

ë ˆí¬ì§€í† ë¦¬ì˜ ì„¤ì •ì— ë“¤ì–´ê°€ `Secrets`íƒ­ì— ìžˆëŠ” `New repository secret` ë²„íŠ¼ì„ í´ë¦­í•´ì„œ Nameì—ëŠ” í† í° ì´ë¦„(ìœ„ì˜ í† í° ì´ë¦„ê³¼ ë‹¬ë¼ë„ ë¨!), Valueì—ëŠ” ìœ„ì—ì„œ ë°œí–‰í•œ í† í° ê°’ì„ ë„£ì–´ì£¼ê³  ì¶”ê°€ë¥¼ í•˜ë©´ ë!

### Workflow ìƒì„±

ì›Œí¬í”Œë¡œìš°ë¥¼ ì‹¤í–‰ì‹œí‚¤ê¸° ìœ„í•´ì„œëŠ” ë¨¼ì € `.github/workflows` ë°‘ì— `main.yml` íŒŒì¼ì„ ì¶”ê°€í•´ì¤€ë‹¤.

```yaml
# GitHub Actionì˜ workflow ì´ë¦„
name: Gatsby Publish

# gh-pagesë¼ëŠ” ë¸Œëžœì¹˜ì— pushë¥¼ í•  ë•Œë§ˆë‹¤ jobsë¥¼ ì‹¤í–‰
on:
  push:
    branches:
      - gh-pages
jobs:
  build_gatsby:
    name: build
    # ì‹¤í–‰ í™˜ê²½ì´ ubuntu-latest
    runs-on: ubuntu-latest
    steps:
      # checkoutì„ í•´ì£¼ëŠ” ì•¡ì…˜ ì†ŒìŠ¤ì½”ë“œë¥¼ ì‚¬ìš©
      - uses: actions/checkout@v2

      - name: packages installðŸ›¸
        run: yarn install

      - name: gatsby buildðŸš€
        run: yarn build
        env:
          # GH_API_KEYì— secretì„ ìƒì„±í•  ë•Œ ì„¤ì •í•œ ì´ë¦„ìœ¼ë¡œ ë„£ì–´ì•¼ í•œë‹¤
          GH_API_KEY: ${{secrets.TOKEN_KEY}}

      - name: deployðŸ›°
        uses: maxheld83/ghpages@v0.2.1
        env:
          GITHUB_TOKEN: ${{secrets.GITHUB_TOKEN}}
          # ì—¬ê¸°ë„ ë§ˆì°¬ê°€ì§€! TOKEN_KEY ëŒ€ì‹  ìžì‹ ì´ ì„¤ì •í•œ ì´ë¦„ì„ ë„£ì–´ì£¼ë©´ ëœë‹¤
          GH_PAT: ${{secrets.TOKEN_KEY}}
          BUILD_DIR: 'public/'
```

ìœ„ ì½”ë“œë¥¼ ìž‘ì„±í•œ ë’¤ì— ë¸Œëžœì¹˜ì— í‘¸ì‹œë¥¼ í•´ì£¼ë©´, repositoryì˜ Actionsíƒ­ì— ì›Œí¬í”Œë¡œìš°ê°€ ì¶”ê°€ëœ ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìžˆë‹¤!

### ë™ìž‘í™•ì¸

ë¸Œëžœì¹˜ì— pushë¥¼ í•˜ë©´, ë°”ë¡œ Github Actionì´ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìžˆë‹¤.

![ì›Œí¬í”Œë¡œìš°ì²´í¬](./images/workflow_check.png)
ìš”ë ‡ê²Œ!

ë§Œì•½ ì € ì¼ë ¨ì˜ ê³¼ì •ì„ ì‹¤í–‰í•˜ê³ , ë°°í¬ê¹Œì§€ ì„±ê³µì ìœ¼ë¡œ ë˜ì—ˆë‹¤ë©´ ì´ëŸ° í™”ë©´ì´ ëœ° ê²ƒì´ë‹¤.

![ì™„ë£Œ](./images/complete.png)
ì•ˆ-ì •ì˜ ì´ˆë¡ë¶ˆ...

ë¸”ë¡œê·¸ë¥¼ í™•ì¸í•´ë³´ë©´, ë§¤ìš°ë§¤ìš° ìž˜ í¬ìŠ¤íŒ…ì´ ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìžˆë‹¤!
![ì„±ê³µ](./images/success.png)

ížˆížˆíž‰..! ì´ì œ ë”ì´ìƒ ê·€ì°®ê²Œ `npm run deploy`ì•ˆí•´ë„ ëœë‹¤...! ížˆížˆíž‰..!

---

ì•„ì§ ì›Œí¬í”Œë¡œìš°ë¥¼ ë°±í¼ì„¼íŠ¸ ì´í•´í•˜ì§€ëŠ” ëª»í–ˆì§€ë§Œ, ì‹¤ì œë¡œ ì´ë ‡ê²Œ ëŒë ¤ë³´ë‹ˆê¹Œ ë„ˆë¬´ íŽ¸í•˜ê³ ...ì§œë¦¿í•´...! ë‹¤ìŒì— í˜¹ì‹œë‚˜ ìžë™í™”í•´ì•¼í•  ì¼ì´ ìžˆë‹¤ë©´ ë˜ ì£¼ì €ì—†ì´ GitHub Actionsë¥¼ ì‚¬ìš©í•  ê²ƒ ê°™ë‹¤..! ë¬¼ë¡  ì  í‚¨ìŠ¤ë„ ê¼­ ì‚¬ìš©í•´ë³´ëŠ”ê±¸ë¡œ >\_^
